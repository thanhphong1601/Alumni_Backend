{% extends 'admin/base_site.html' %}{% block content %}<form id="myForm" method="get">    <label for="object">Đối tượng thống kê:</label>    <select name="object" id="object" onchange="changePeriod()">        <option value="users">Người dùng</option>        <option value="posts">Bài viết</option>    </select>    <label for="period">Thống kê theo:</label>    <select name="period" id="period" onchange="changePeriod()">        <option value="year">Năm</option>        <option value="month">Tháng</option>        <option value="quarter">Quý</option>    </select>    <div id="year" style="display: inline-block">        <label for="yearInput">Nhập năm:</label>        <input type="text" name="year" id="yearInput" value="">    </div>    <input type="submit" value="Thống kê"></form><canvas id="myChart"></canvas><script src="https://cdn.jsdelivr.net/npm/chart.js"></script><script>    function getRandomColor() {        let red = Math.floor(Math.random() * 256);        let green = Math.floor(Math.random() * 256);        let blue = Math.floor(Math.random() * 256);        return `rgb(${red},${green},${blue})`;    }    let period = ' {{ period }}'    let labels = []    let values = []    let backgroundColors = []    {% for c in stats %}    values.push({{ c.count }})    {% if period == 'year' %}    labels.push('{{ c.year }}')    {% elif period == 'month' %}    labels.push("Thang " + '{{ c.month }}')    {% else %}    labels.push("Quy " + '{{ c.quarter }}')    {% endif %}    backgroundColors.push(getRandomColor())    {% endfor %}    window.onload = () => {        const ctx = document.getElementById('myChart');        new Chart(ctx, {            type: 'bar',            data: {                labels: labels,                datasets: [{                    label: period,                    data: values,                    borderWidth: 1,                    backgroundColor: backgroundColors,                }]            },            options: {                scales: {                    y: {                        beginAtZero: true,                        precision: 0,                    }                }            }        });    }</script>{% endblock %}